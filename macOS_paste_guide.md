# Avante macOS图片粘贴指南

本指南将帮助您解决在macOS上使用Avante Neovim插件粘贴图片时可能遇到的问题。

## 问题背景

在macOS上，使用Cmd+V粘贴图片到Avante插件可能会遇到一些问题，这通常与macOS的剪贴板管理方式和Neovim的键盘映射处理有关。

## 解决方案

我们提供了多种解决方案来确保您可以顺利地粘贴图片：

### 方案1：使用Alt+V (Option+V) 快捷键

在最新版本中，我们添加了Alt+V (Option+V) 快捷键专门用于粘贴图片：

1. 复制要粘贴的图片
2. 在Avante编辑窗口中，按Alt+V (Option+V)
3. 图片将直接粘贴并添加适当的标记

### 方案2：使用`:AvantePasteImage`命令

如果快捷键不起作用，您可以使用命令行方式：

1. 复制要粘贴的图片
2. 在Neovim命令模式下，输入`:AvantePasteImage`
3. 按回车执行命令

### 方案3：使用独立的命令行工具

我们提供了一个独立的命令行工具，可以在任何终端中使用：

1. 复制要粘贴的图片
2. 在终端中执行：`./paste_image.sh`
3. 脚本会生成包含`image:`标记的路径
4. 复制这个路径并粘贴到Avante编辑窗口中

### 方案4：检查和调试

如果您仍然遇到问题，可以使用以下命令进行诊断：

```
:AvanteCheckPaste
```

这将显示当前粘贴相关的设置和映射情况，帮助诊断问题。

## 依赖项

要使粘贴功能正常工作，您需要安装以下工具：

1. **pngpaste** - 用于从剪贴板直接保存图片
   ```
   brew install pngpaste
   ```

## 故障排除

如果您仍然遇到问题，请尝试以下步骤：

1. 确认您的macOS和Neovim版本是最新的
2. 检查`~/.cache/avante/logs/`中的日志文件，查看详细错误信息
3. 尝试重启Neovim
4. 确保没有其他插件覆盖了Cmd+V或Alt+V快捷键
5. 检查是否有权限问题导致无法创建或访问`~/.cache/avante/pasted_images/`目录

## 已知问题

1. 在某些情况下，Cmd+V映射可能被macOS系统或其他Neovim插件拦截
2. 某些应用程序的复制图片方式可能不兼容，这时请尝试先将图片保存到文件，然后复制文件路径

如需更多帮助，请提交GitHub Issue或查看完整文档。 